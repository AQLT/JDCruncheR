<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calcul d'un score global — compute_score • JDCruncheR</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Calcul d'un score global — compute_score" />

<meta property="og:description" content="Permet de calculer un score global à partir d'un bilan qualité" />





<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">JDCruncheR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Fonctions du package</a>
</li>
<li>
  <a href="../articles/Lancement_cruncher.html">Vignette</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    JDemetra+
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://github.com/jdemetra/jdemetra-app/releases">Télécharger JDemetra+</a>
    </li>
    <li>
      <a href="https://github.com/jdemetra/jwsacruncher/releases">Télécharger le cruncher de JDemetra+</a>
    </li>
    <li>
      <a href="https://github.com/InseeFr/JDCruncheR/wiki/Installation-et-configuration-de-JDemetra--et-du-cruncher">Configuration avec une version portable de Java</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/nbbrd/rjdemetra">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calcul d'un score global</h1>
    <small class="dont-index">Source: <a href='https://github.com/InseeFr/JDCruncheR/blob/master/R/QR_functions.R'><code>R/QR_functions.R</code></a></small>
    <div class="hidden name"><code>compute_score.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Permet de calculer un score global à partir d'un bilan qualité</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for QR_matrix</span>
<span class='fu'>compute_score</span><span class='op'>(</span>
  <span class='va'>x</span>,
  score_pond <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>qs_residual_sa_on_sa <span class='op'>=</span> <span class='fl'>30</span>, f_residual_sa_on_sa <span class='op'>=</span> <span class='fl'>30</span>,
    qs_residual_sa_on_i <span class='op'>=</span> <span class='fl'>20</span>, f_residual_sa_on_i <span class='op'>=</span> <span class='fl'>20</span>, f_residual_td_on_sa <span class='op'>=</span> <span class='fl'>30</span>,
    f_residual_td_on_i <span class='op'>=</span> <span class='fl'>20</span>, oos_mean <span class='op'>=</span> <span class='fl'>15</span>, oos_mse <span class='op'>=</span> <span class='fl'>10</span>, residuals_independency <span class='op'>=</span> <span class='fl'>15</span>,
    residuals_homoskedasticity <span class='op'>=</span> <span class='fl'>5</span>, residuals_skewness <span class='op'>=</span> <span class='fl'>5</span>, m7 <span class='op'>=</span> <span class='fl'>5</span>, q_m2 <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>,
  modalities <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Good"</span>, <span class='st'>"Uncertain"</span>, <span class='st'>""</span>, <span class='st'>"Bad"</span>, <span class='st'>"Severe"</span><span class='op'>)</span>,
  <span class='va'>normalize_score_value</span>,
  na.rm <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>n_contrib_score</span>,
  <span class='va'>conditional_indicator</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>objet de type <code>QR_matrix</code> ou <code>mQR_matrix</code>.</p></td>
    </tr>
    <tr>
      <th>score_pond</th>
      <td><p>formule utilisée pour calculer le score global.</p></td>
    </tr>
    <tr>
      <th>modalities</th>
      <td><p>modalités triées par ordre d'importance dans le calcul du score (voir détails).</p></td>
    </tr>
    <tr>
      <th>normalize_score_value</th>
      <td><p>chiffre indiquant la valeur de référence pour la normalisation des pondérations utilisées lors du
calcul du score. Si le paramètre n'est pas renseigné, les poids ne seront pas normalisés.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>booléen indiquant si les valeurs manquantes doivent être enlevées pour le calcul du score.</p></td>
    </tr>
    <tr>
      <th>n_contrib_score</th>
      <td><p>entier indiquant le nombre de variables à créer dans la matrice des valeurs du
bilan qualité contenant les <code>n_contrib_score</code> plus grandes contributrices au score (voir détails).
S'il n'est pas spécifié, aucune variable n'est créée.</p></td>
    </tr>
    <tr>
      <th>conditional_indicator</th>
      <td><p>une <code>list</code> contenant des listes ayant 3 éléments : "indicator", "conditions" et
"condition_modalities". Permet de réduire à 1 le poids de certains indicateurs en fonction des valeurs
d'autres variables (voir détails).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>autres paramètres non utilisés.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Un objet de type <code><a href='QR_matrix.html'>QR_matrix</a></code> ou <code><a href='QR_matrix.html'>mQR_matrix</a></code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>La fonction <code>compute_score</code> permet de calculer un score à partir des modalités
d'un bilan qualité. Pour cela, chaque modalité est associée à un poids défini par le paramètre
<code>modalities</code>. Ainsi, le paramètre par défaut étant <code><a href='https://rdrr.io/r/base/c.html'>c("Good", "Uncertain", "Bad","Severe")</a></code>,
la valeur <code>"Good"</code> sera associée à la note 0, la valeur <code>"Uncertain"</code> sera associée
à la note 1, la valeur <code>"Bad"</code> sera associée à la note 2 et la valeur <code>"Bad"</code> sera associée à la note 3.</p>
<p>Le calcul du score se fait grâce au paramètre <code>score_pond</code>, qui est un vecteur numérique
nommé contenant des poids et dont les noms correspondent aux variables de la matrice des modalités
à utiliser dans le score. Ainsi, avec le paramètre <code>score_pond =
c(qs_residual_sa_on_sa = 10, f_residual_td_on_sa = 5)</code> le score sera calculé à partir des deux
variables qs_residual_sa_on_sa et f_residual_td_on_sa. Les notes associées aux modalités de
la variable qs_residual_sa_on_sa seront multipliées par 10 et celles associées à la variable
f_residual_td_on_sa seront multipliées par 5.
Dans le calcul du score, certaines variables#' peuvent être manquantes: pour ne pas prendre en compte
ces valeurs dans le calcul, il suffit d'utiliser le paramètre <code>na.rm = TRUE</code>.</p>
<p>Le paramètre <code>normalize_score_value</code> permet de normaliser les scores. Par exemple,
si l'on souhaite avoir des notes entre 0 et 20, il suffit d'utiliser le paramètre
<code>normalize_score_value = 20</code>.</p>
<p>Le paramètre <code>n_contrib_score</code> permet d'ajouter de nouvelles variables à la matrice des valeurs
du bilan qualité dont les valeurs correspondent aux noms des variables qui contribuent le plus au score
de la série. <code>n_contrib_score</code> est un entier égal au nombre de variables contributrices
que l'on souhaite exporter. Par exemple, pour <code>n_contrib_score = 3</code>, trois colonnes seront créées
et elles contiendront les trois plus grandes contributrices au score. Les noms des nouvelles variables
sont <em>i</em>_highest_score, <em>i</em> correspondant au rang en terme de contribution au score (1_highest_score
contiendra les noms des plus grandes contributrices, 2_highest_score
des deuxièmes plus grandes contributrices, etc).
Seules les variables qui ont une contribution non nulle au score sont
prises en compte. Ainsi, si une série a un score nul, toutes les colonnes <em>i</em>_highest_score
associées à cette série seront vides. Et si une série a un score positif uniquement du fait
de la variable "m7", alors la valeur correspondante à la variable 1_highest_score sera égale à
"m7" et celle des autres variables <em>i</em>_highest_score seront vides.</p>
<p>Certains indicateurs peuvent n'avoir de sens que sous certaines conditions. Par exemple, le test
d'homoscédasticité n'est valide que si les résidus sont indépendants et les tests de normalité, que
si les résidus sont indépendants et homoscédastiques. Le paramètre <code>conditional_indicator</code>
permet de prendre cela en compte en réduisant, sous certaines conditions, à 1 le poids de certains variables.
C'est une <code>list</code> contenant des listes ayant 3 éléments :</p><ul>
<li><p>"indicator" : nom de la variable pour laquelle on veut ajouter des conditions</p></li>
<li><p>"conditions" : nom des variables que l'on utilise pour conditionner</p></li>
<li><p>"conditions_modalities" : modalités qui doivent être vérifiées pour modifier le poids
Ainsi, avec le paramètre <code>conditional_indicator = list(list(indicator = "residuals_skewness", conditions = c("residuals_independency", "residuals_homoskedasticity"), conditions_modalities = c("Bad","Severe")))</code>,
on réduit à 1 le poids de la variable "residuals_skewness" lorsque les modalités du test d'indépendance
("residuals_independency") ou du test d'homoscédasticité ("residuals_homoskedasticity") valent "Bad" ou "Severe".</p></li>
</ul>

    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other QR_matrix functions: 
<code><a href='export_xlsx.QR_matrix.html'>export_xlsx.QR_matrix</a>()</code>,
<code><a href='export_xlsx.mQR_matrix.html'>export_xlsx.mQR_matrix</a>()</code>,
<code><a href='extract_QR.html'>extract_QR</a>()</code>,
<code><a href='extract_score.html'>extract_score</a>()</code>,
<code><a href='rbind.QR_matrix.html'>rbind.QR_matrix</a>()</code>,
<code><a href='sort.html'>sort</a>()</code>,
<code><a href='weighted_score.html'>weighted_score</a>()</code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>QR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='extract_QR.html'>extract_QR</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>QR</span> <span class='op'>&lt;-</span> <span class='fu'>compute_score</span><span class='op'>(</span><span class='va'>QR</span>,n_contrib_score <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='va'>QR</span>
<span class='va'>QR</span><span class='op'>$</span><span class='va'>modalities</span><span class='op'>$</span><span class='va'>score</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alain Quartier-la-Tente.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


